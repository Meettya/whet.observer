/**
 * Copyright (c) 2012 Joseph Zimmerman http://joezimjs.com
 * 
 * This script is licensed under the 
 * GNU General Public License, version 3 (GPL-3.0)
 * http://www.opensource.org/licenses/gpl-3.0.html
 *
 * Joe Zim's jQuery Pub/Sub Plugin
 * Version: 1.2
 * Supported jQuery Versions: 1.4.3+
 */
(function(o){var m={};o.subscribe=function(q,s,t){var A,I={},t=t||{};if("string"!==o.type(q)||!o.isFunction(s))return null;A=q.split(" ");o.each(A,function(o,q){if(""===q||I[q])return!0;I[q]=!0;m[q]||(m[q]=[]);m[q].push([s,t])});return{topics:q,callback:s}};o.unsubscribe=function(q,s){var t,A={};if(!q||"string"!==o.type(q)&&(!q.topics||"string"!==o.type(q.topics)))return o;q.topics&&(s=s||q.callback,q=q.topics);t=q.split(" ");o.each(t,function(q,t){var z=m[t];if(""===t||!z||A[t])return!0;A[t]=!0; !s||!o.isFunction(s)?delete m[t]:o.each(z,function(m,o){if(o[0]===s)return z.splice(m,1),!1})});return o};o.publish=function(q,s){if(!q||"string"!==o.type(q))return o;var t=q.split(" ");o.each(t,function(q,t){if(""===t)return!0;m[t]&&o.each(m[t],function(m,o){o[0].call(o[1],t,s)})});return o}})(jQuery);